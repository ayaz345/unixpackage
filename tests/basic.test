- name: No packages specified
  preconditions:
    python_version: 2.7.10
  tags:
    - install
    - error
  scenario:
    - Install in virtualenv
    - unixpackage: install
    - expect: No packages specified
    - exit:
        with code: 1

- name: Invalid package specified
  preconditions:
    python_version: 2.7.10
  tags:
    - install
    - invalid
    - error
  scenario:
    - Install in virtualenv
    - unixpackage: install notavalidname
    - expect: Package notavalidname not found
    - exit:
        with code: 1

- name: Check libpq-dev
  preconditions:
    python_version: 2.7.10
  tags:
    - check
    - onepackage
  scenario:
    - Install in virtualenv
    - unixpackage: cleancache
    - exit
    - unixpackage: check libpq-dev
    - expect: Downloading and caching
    - exit
    - unixpackage: check libpq-dev
    - expect: "installed"
    - exit

- name: Show libpq-dev
  preconditions:
    python_version: 2.7.10
  tags:
    - show
  scenario:
    - Install in virtualenv
    - unixpackage: show libpq-dev firefox
    - expect: "sudo apt-get install -y libpq-dev"
    - exit

- name: Install libpq-dev
  preconditions:
    python_version: 2.7.10
  tags:
    - install
    - onepackage
  scenario:
    - Install in virtualenv
    - unixpackage: cleancache
    - exit
    - unixpackage: install libpq-dev
    - expect: "Downloading and caching"
    - expect: "Already installed: libpq-dev"
    - exit
    - unixpackage: install libpq-dev
    - expect: "Already installed: libpq-dev"
    - exit
